<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Xây dựng lớp mô tả điện thoại.</title>
</head>
<body>
<script>
    class Mobile {
        constructor(pin, status, mobile
            // , draftingMessage, messageComes, messageSent
        ) {
            this.pin = pin;
            this.draftingMessage = ""; // tin nhan soan thao
            this.messageComes = []; //tin nhan den
            this.messageSent = []; // tin nhan da gui
            this.status = status;
            this.mobile = mobile;
        }

        setMobile(mobile) {
            this.mobile = mobile;
        }

        checkStatus(status) {
            if (status) {
                document.write("Dien thoai dang bat");
                this.pin--;
            } else {
                document.write("Dien thoai dang tat");
            }
        }

        charge() {
            if (this.pin == 100) {
                document.write("Dien thoai da day");
            } else {
                document.write("Dien thoai dang sac " + this.pin++);
            }
        }

        writeMessage() {
            if (this.pin > 0) {
                this.draftingMessage = prompt("Nhap tin nhan: ");
                this.messageSent.push(this.draftingMessage);
                this.mobile.messageComes.push(this.draftingMessage);
                this.pin--;
            } else {
                alert("Het pin roi");
            }
        }
        seeMessageCome() {
            let message = "";
            for (let m of this.messageComes) {
                message += m;
                message += "\n";
            }
            alert(message);
        }
    }

    let iphone = new Mobile(100, true);
    let android = new Mobile(100, true);
    iphone.setMobile(android);
    android.setMobile(iphone);
    let i = 0;
    while (i < 5) {
        iphone.writeMessage();
        ++i;
        console.log(i);
    }
    android.seeMessageCome();
</script>
</body>
</html>
